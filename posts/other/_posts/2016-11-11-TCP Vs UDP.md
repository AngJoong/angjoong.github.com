---
layout: post
title:  "TCP Vs UDP"
date:   2016-11-11 22:00:00 +0000
description: 자바 가비지 컬렉션. NAVER D2의 내용을 공부를 위해 요약
tags: ['Network', 'TCP', 'UDP']
author: "AngJoong"
---

# 1. TCP(Transmission Control Protocol - 전송 제어 프로토콜)
TCP는 근거리 통신망이나 인트라넷, 인터넷에 연결된 컴퓨터에서 실행되는 프로그램 간에 **일련의 옥텟을 안정적으로, 순서대로, 에러없이 교환** 할 수 있게 한다. TCP는 전송 계층에 위치한다.   

TCP는 웹 브라우저들이 월드 와이드 웹에서 서버에 연결할 때 사용되며, 이메일 전송이나 파일 전송에도 사용된다.

## 1.1 특징

- 높은 신뢰성(Sequence Number, Ack Number를 통한 신뢰성 보장)
- 연결의 설정(3-way handshaking)과 해제(4-way handshaking)
- 데이터 흐름 제어(수신자 버퍼 오버플로우 방지) 및 혼잡 제어(네트워크 내 패킷 수가 과도하게 증가하는 현상 방지)
- 전이중(Full-Duplex), 점대점(Point to Point) 서비스

## 1.2 3-Way Handshake
TCP를 사용해 데이터를 전송하기 전에 정확한 전송을 보장하기 위해 상대방 컴퓨터와 사전에 세션을 수립하는 과정을 의미한다

### 1.2.1 역활
양쪽 모두 데이타를 전송할 준비가 되었다는 것을 보장하고, 실제로 데이타 전달이 시작하기전에 한쪽이 다른 쪽이 준비되었다는 것을 알수 있도록 한다. 양쪽 모두 상대편에 대한 초기 순차일련변호를 얻을 수 있도록 한다.

### 1.2.2 과정
1. 클라이언트 C는 서버 S에 접속을 요청하는 SYN 패킷을 보낸다. 이때 C는 SYN을 보내고 SYN/ACK 응답을 기다리는 SYN_SENT 상태가 된다.

2. S는 SYN요청을 받고 C에게 요청을 수락한다는 ACK 와 SYN flag 가 설정된 패킷을 발송하고 C의 ACK 응답을 기다린다. 이때 S는 SYN_RECEIVED 상태가 된다.

3. C는 S에게 ACK을 보내면 연결이 이루어지고 데이터가 전송이 가능하다. 이때의 S 상태는 ESTABLISHED 이다.

![](http://cfile9.uf.tistory.com/image/225A964D52F1BB69177202)

## 1.3 4-Way Handshake

### 1.3.1 역활
세션을 종류하기 위해 수행되는 절차입니다.  

### 1.3.2 과정

1. 클라이언트가 연결을 종료하겠다는 FIN플래그를 전송한다.

2. 서버는 ACK를 보내고 자신의 통신이 끝날때까지 기다리는데 이 상태가 CLOSE_WAIT 상태다.

3. 서버가 통신이 끝났으면 연결이 종료되었다고 클라이언트에게 FIN플래그를 전송한다.

4. 클라이언트는 확인했다는 메시지를 보낸다.

클라이언트에서 세션을 종료시킨 후 뒤늦게 도착하는 패킷이 있다면 이 패킷은 드랍되고 데이터는 유실된다. 때문에 클라이언트는 서버로부터 FIN을 수신하더라도 일정시간(디폴트 240초) 동안 세션을 남겨놓고 잉여 패킷을 기다리는 과정을 거치게 되는데 이 과정을 "TIME_WAIT" 라고 합니다.

![](http://cfile25.uf.tistory.com/image/2152353F52F1C02835CC3B)


# 2. UDP(User Datagram Protocol - 사용자 데이터그램 프로토콜)
UDP의 전송 방식은 너무 단순해서 서비스의 신뢰성이 낮고, 데이터그램 도착 순서가 바뀌거나, 중복되거나, 심지어는 통보 없이 누락시키기도 한다. UDP는 일반적으로 오류의 검사와 수정이 필요 없는 애플리케이션에서 수행할 것으로 가정한다.  

UDP를 사용하는 네트워크 애플리케이션에는 도메인 이름 서비스 (DNS), IPTV, 음성 인터넷 프로토콜 (VoIP), TFTP, IP 터널, 그리고 많은 온라인 게임 등이 있다.

## 2.1 특징
- 비연결형(port만 확인하여 소켓을 식별하고 송수신)
- 패킷 오버헤드가 적어 네트워크 부하 감소
- 비신뢰성
- 오류검출(헤더에 오류 검출 필드를 포함하여 무결성 검사)
- DNS, NFS, SNMP, RIP 등 사용




\#1. TCP - https://ko.wikipedia.org/wiki/전송_제어_프로토콜  
\#2. UDP - https://ko.wikipedia.org/wiki/사용자_데이터그램_프로토콜  
\#3. TCP & UDP - http://mindnet.tistory.com/entry/네트워크-쉽게-이해하기-22편-TCP-3-WayHandshake-4-WayHandshake
