---
layout: post
title:  "overview"
date:   2016-10-07 23:54:00 +0000
tags: ['Zookeeper']
author: "AngJoong"
description: "분산 응용프로그램을 위한 분산 코디네이션 서비스"
---

주키퍼는 분산된 응용프로그램을 위한 분산 코디네이션 오픈소스이다. 간단한 프리미티브 셋으로 동기화, 설정 관리, 그룹, 네이밍을 위한 고수준의 서비스를 구현한다. 개발 하기 쉽게 디자인되었으며 파일 시스템의 디렉토리 구조와 비슷한 데이터 모델을 사용한다.  
  
코디네이션 서비스는 구현하기가 상당히 힘들다. 레이스 컨디션(Race condition), 데드락(deadlock)과 같은 에러가 나기 쉽기 때문인데, 주키퍼는 분산 응용 프로그램의 코디네이션 구현 책임을 완화시켜 준다.  

# 디자인 목표
##1. 다루기 쉽다.
분산 프로세스가 공유된 **계층 네임스페이스(Hierarhal Namespace)**를 통해 서로를 조정 한다. 파일시스템과 비슷한 네임스페이스는 **Z-node**라 불리는 데이터 레지스터로 구성되어있다. 전형적인 파일 시스템과는 달리 저장 목적으로 디자인 되었다. 데이터는 메모리에서 관리되어 고 수준의 처리량과 짧은 대기시간을 보여준다.  
  
주키퍼는 고성능, 고가용성, 정확한 순서 접근을 제공한다. 규모가 큰 분산시스템에서 사용될 수 있고, SPOF를 예방하며, Synchronization Primitives를 클라이언트에서 구현할 수 있다.  
  
##2. 복제된다.
주키퍼 앙상블(Ensemble)이라 불리는 주키퍼 서버들의 셋으로 복제한다.  
  
![](https://zookeeper.apache.org/doc/trunk/images/zkservice.jpg)
  
주키퍼 서버들은 반드시 서로를 알아야 한다. 메모리에 상태 이미지, 트랜잭션 로그를 관리하고 영구 저장소에 스냅샷을 관리한다. 이때 하나의 서버가 죽더라도 다수의 서버들이 살아있는한 계속해서 주키퍼 서비스를 사용할 수 있다.  
  
클라이언트는 하나의 주키퍼 서버에 연결해 요청을 주고 받고, 워치(Watch) 이벤트를 얻고, 하트비트를 보내며 TCP 연결을 유지한다. 만약 TCP 연결이 끊어지면 다른 서버로 연결이 가능하다.  

##3. 정렬된다.
주키퍼는 업데이트 마다 모든 주키퍼 트랜잭션의 순서를 반영하는 숫자를 찍는다. 이어서 일어나는 작업에서 Synchronization Primitives와 같은 고수준의 추상화를 구현하기 위해 사용한다.  

##4. 빠르다.
특히 **읽기 위주의 작업**에서 빠르다. 읽고 쓰기 비율이 10:1 정도일때 가장 좋은 성능을 낸다.


\#1. https://zookeeper.apache.org/doc/trunk/zookeeperOver.html