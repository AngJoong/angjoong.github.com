---
layout: post
title:  "sessions"
date:   2016-10-18 16:26:00 +0000
tags: ['Zookeeper']
author: "AngJoong"
description: "분산 응용프로그램을 위한 분산 코디네이션 서비스"
---

주키퍼 클라이언트는 바인딩하는 랭귀지를 사용해 서비스로의 핸들을 생성함으로써 주키퍼 서비스와의 세션을 구축한다. 한번 세션이 생성되면, 핸들은 **CONNECTING** 상태에서 시작하고 클라이언트 라이브러리는 **CONNECTED** 상태로 전환하기 위해 주키퍼 서비스의 서버들중 하나로 연결을 시도한다. 정상 동작중에는 이 두 상태중 하나의 상태이다. 만약 세션 만료, 인증 실패와 같은 회복할 수 없는 에러가 발생하거나 애플리케이션이 핸들을 닫아 버린다면 핸들은 **CLOSED** 상태가 된다.  

###### 주키퍼 클라이언트 세션 변화
![](https://zookeeper.apache.org/doc/trunk/images/state_dia.jpg)

세션을 생성하기 위해 애플리케이션 코드는 반드시 각 주키퍼 서버에 일치하는 연결 정보를 제공해야 한다. `(e.g. "127.0.0.1:4545" or "127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002")` 주키퍼 클라이언트 라이브러리는 임의로 서버를 선택해 연결을 시도한다. 만약 연결이 실패하거나 어떠한 이유로 서버로 부터 연결이 종료된다면 클라이언트는 연결이 될 때까지 자동적으로 리스트의 다음 서버로 연결을 시도한다.

* 연결 스트링에 `chroot` 정보를 추가 할 수 있다. `(e.g. 127.0.0.1:4545/app/a" or "127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002/app/a)`